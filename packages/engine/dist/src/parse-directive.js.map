{"version":3,"sources":["../../src/parse-directive.ts"],"sourcesContent":["import { parseYaml } from '@petk/utils';\nimport type { Directive, DirectiveType } from './types';\n\nexport function parseDirective(yaml: string, type: DirectiveType): Directive {\n    let data: any;\n    try {\n        data = parseYaml(yaml);\n    } catch (e) {\n        throw new Error('YAML parsing error: ' + (e instanceof Error ? e.message : String(e)));\n    }\n\n    if (type === 'include') {\n        if (!data || typeof data.path !== 'string') {\n            throw new Error('Invalid include directive: missing or invalid path');\n        }\n        return { type, path: data.path };\n    }\n    if (type === 'var') {\n        if (!data || typeof data.name !== 'string' || !('value' in data)) {\n            throw new Error('Invalid var directive: missing name or value');\n        }\n        return { type, name: data.name, value: data.value };\n    }\n    if (type === 'if') {\n        if (!data || !('condition' in data)) {\n            throw new Error('Invalid if directive: missing condition');\n        }\n        return { type, condition: data.condition };\n    }\n    throw new Error('Invalid directive type: ' + type);\n}"],"names":["parseYaml","parseDirective","yaml","type","data","e","Error","message","String","path","name","value","condition"],"mappings":";;;;;;;AAAA,SAASA,SAAS,QAAQ,cAAc;AAGxC,OAAO,SAASC,eAAeC,IAAY,EAAEC,IAAmB;IAC5D,IAAIC;IACJ,IAAI;QACAA,OAAOJ,UAAUE;IACrB,EAAE,OAAOG,GAAG;QACR,MAAM,IAAIC,MAAM,yBAA0BD,CAAAA,AAAC,YAADA,GAAaC,SAAQD,EAAEE,OAAO,GAAGC,OAAOH,EAAC;IACvF;IAEA,IAAIF,SAAS,WAAW;QACpB,IAAI,CAACC,QAAQ,OAAOA,KAAKK,IAAI,KAAK,UAAU;YACxC,MAAM,IAAIH,MAAM;QACpB;QACA,OAAO;YAAEH,MAAAA;YAAMM,MAAML,KAAKK,IAAI;QAAC;IACnC;IACA,IAAIN,SAAS,OAAO;QAChB,IAAI,CAACC,QAAQ,OAAOA,KAAKM,IAAI,KAAK,YAAY,CAAE,CAAA,WAAWN,IAAG,GAAI;YAC9D,MAAM,IAAIE,MAAM;QACpB;QACA,OAAO;YAAEH,MAAAA;YAAMO,MAAMN,KAAKM,IAAI;YAAEC,OAAOP,KAAKO,KAAK;QAAC;IACtD;IACA,IAAIR,SAAS,MAAM;QACf,IAAI,CAACC,QAAQ,CAAE,CAAA,eAAeA,IAAG,GAAI;YACjC,MAAM,IAAIE,MAAM;QACpB;QACA,OAAO;YAAEH,MAAAA;YAAMS,WAAWR,KAAKQ,SAAS;QAAC;IAC7C;IACA,MAAM,IAAIN,MAAM,6BAA6BH;AACjD"}